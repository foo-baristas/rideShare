<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>RideShare</title>
  <!-- jQuery 2.2.4 minified -->
  <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css">
  <!-- Latest compiled and minified JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  <!-- DATE-PICKER BOOTSTRAPCDN -->
  <!-- <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css" rel="stylesheet"> -->
  <!-- <link rel="stylesheet" type="text/css" media="screen" -->
  <!-- href="http://tarruda.github.com/bootstrap-datetimepicker/assets/css/bootstrap-datetimepicker.min.css"> -->

  <script type="text/javascript" src="http://www.google.com/jsapi?key=AIzaSyCsVqhn3Mi-rV82PbqFinMtoIS7mhMy3Xs"></script>
  <style>
  body {
    background-color: #ebebeb;
  }


  .trip {

    border-top: 1px solid black;
    border-bottom: 1px solid black;
    padding-top: 5px;
    padding-bottom: 5px;
    margin-bottom: 25px;
  }

  .trip:hover {

    background-color: #d6d6d6;
    cursor: pointer;
  }

  .cost {

    color: green;
  }

  .profile {

    border-radius: 50px;
  }

  .name {

    font-size: 20px;
    font-weight: bold;
  }

  .vertInfo {

    position: inherit;
    top: 50%;
    transform: translateY(50%);
  }

  .vertPic {

    position: inherit;
    top: 50%;
    transform: translateY(10%);
  }

  .icon {

    width: 20px;
  }
  </style>
</head>

<body class="container-fluid">
  <form class="landing-search form-inline" action="/index" method="post">
    <div class="form-group">
      <label for="origin">Origin</label>
      <input type="text" name="origin" id="origin" value="{{info.origin}}">
      {{#if info.error.origin}}
      <small class="text-muted"><span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>{{info.error.origin}}</small>
      {{/if}}
      <label for="destination">Destination</label>
      <input type="text" name="destination" id="destination" value="{{info.destination}}">
      {{#if info.error.destination}}
      <small class="text-muted"><span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>{{info.error.destination}}</small>
      {{/if}}
      <label for="date">Date</label>
      <input type="date" name="date" value="{{info.date}}">
      {{#if info.error.date}}
      <small class="text-muted"><span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>{{info.error.date}}</small>
      {{/if}}

      <div class="input-group">
        <button type="submit" class="btn btn-primary input-group-addon" style="color: white;">
          <span class="glyphicon glyphicon-search"></span> Find my ride
        </button>
        <a href="/trip/advanced" class="input-group-addon">Advanced Search</a>
      </div>
    </div>
  </form>



  {{#if queries.origin}}
  <h3>Trips From: <span>{{queries.origin}}</span>&nbsp;&nbsp;<img src="https://cdn2.iconfinder.com/data/icons/navigation-set-arrows-part-two/32/Double_Arrow_Right-24.png">&nbsp;&nbsp;<span>{{queries.destination}}</span></h3>
  {{else}}
  <h3>Showing all available trips.</h3>
  {{/if}}

  <div class="row">
    {{#each objects}}
    <div class="row trip">
      <span onclick="redirect({{id}});">
        <div class="form-group col-sm-4">
          <img class="col-md-6" src="{{profile_pic_url}}">
          <label class="col-md-6 form-control-label">
            {{name_first}} {{name_last}} <br />
            Age: {{age}}<br />
            Rating: ?<br />
            <a href="/user/{{user_id}}">View Profile</a>
          </label>
          <label class="col-md-12">
            <br />
            {{#if isSmoking}}
            <img class="icon" src="/images/smoking.png">
            {{else}}
            <img class="icon" src="/images/no_smoking.png">
            {{/if}}

            {{#if isFood}}
            <img class="icon" src="/images/eating.png">
            {{else}}
            <img class="icon" src="/images/no_eating.png">
            {{/if}}

            {{#if isPets}}
            <img class="icon" src="/images/pets.png">
            {{else}}
            <img class="icon" src="/images/no_pets.png">
            {{/if}}

            {{#if isMusic}}
            <img class="icon" src="/images/music.png">
            {{else}}
            <img class="icon" src="/images/no_music.png">
            {{/if}}

            {{#if isTalking}}
            <img class="icon" src="/images/talking.png">
            {{else}}
            <img class="icon" src="/images/no_talking.png">
            {{/if}}
          </label>
        </div>
        <div class="form-group col-sm-6">
          <div class="row">
            <label class="col-md-12">
              {{start_location}} - {{end_location}}<br />
              {{formatDate date_of}} @ {{formatTime date_of}}
            </label>
          </div>
          <br />
          <div class="row">
            <label class="col-md-12">
              Car Description: {{car_description}}<br />
              <img width="50" src="{{car_img_url}}">
            </label>
          </div>
        </div>

        <div class="form-group col-sm-2">
          <label class="col-md-12">
            ${{trip_cost}} per seat<br />
            {{num_seats}} seat(s) left<br />
            <form method="post" action="/trip/reserve/{{id}}">
              <button type="submit" class="btn btn-default">
                <span class="glyphicon glyphicon-pushpin"></span> Reserve
              </button>
            </form>
          </label>
        </div>
      </span>
    </div>
    {{/each}}
  </div>

  <script type="text/javascript">
  google.load("maps", "3.x", {callback: initialize, other_params:'libraries=places&key=AIzaSyD2gxzAGO1he66elVkh6TLdYXhCYVc3o8E'});
  function initialize() {

    var input = document.getElementById('origin');
    var autocomplete = new google.maps.places.Autocomplete(input, { types: ['(cities)'], region:'US' });

    var inputDest = document.getElementById('destination');
    var autocomplete2 = new google.maps.places.Autocomplete(inputDest, { types: ['(cities)'], region:'US' });

    google.maps.event.addDomListener(window, 'load', initialize);
  }
  </script>
</body>
</html>
